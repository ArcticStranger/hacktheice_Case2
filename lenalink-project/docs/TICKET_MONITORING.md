# Документация мониторинга билетов LenaLink

## Обзор

Модуль мониторинга билетов интегрирован с фронтендом LenaLink и обеспечивает отслеживание статуса забронированных билетов в реальном времени с поддержкой различных типов маршрутов.

## Структура файлов

```
src/
├── api/
│   └── ticketMonitoring.js          # API модуль для работы с бэкендом
├── views/
│   ├── ticketMonitoring/
│   │   ├── views/
│   │   │   └── TicketMonitoring.vue # Основной компонент мониторинга
│   │   └── router.js               # Роутер модуля
│   └── ticketOrderMain.vue         # Главная страница заказа билетов
└── router.js                        # Главный роутер приложения
```

## Основные возможности

### 1. Отслеживание статуса билета

- **Забронирован** - билет забронирован, ожидает подтверждения
- **Подтвержден** - билет подтвержден, готов к поездке
- **В пути** - пассажир в пути
- **Завершен** - поездка завершена
- **Отменен** - билет отменен
- **Задержан** - задержка рейса

### 2. Типы маршрутов

- **Оптимальный** - лучшее соотношение цены и времени
- **Дешевый** - минимальная стоимость
- **Быстрый** - минимальное время в пути

### 3. Детализация маршрута

- Информация о каждом сегменте
- Типы транспорта с иконками
- Время отправления и прибытия
- Стоимость каждого сегмента
- Провайдеры услуг

## API Методы

### `getTicketStatus(ticketId)`

Получение статуса билета и основной информации

### `getRoutesByType(searchParams, routeType)`

Получение маршрутов по типу (optimal/cheapest/fastest)

### `getRealTimeUpdates(ticketId)`

Получение обновлений в реальном времени

### `getTicketInfo(ticketId)`

Получение подробной информации о билете

## Использование

### Переход к мониторингу

```javascript
// Переход к мониторингу с ID билета
this.$router.push({
  path: '/ticket-monitoring',
  query: { ticketId: 'your-ticket-id' },
})

// Или сохранение в локальное хранилище
localStorage.setItem('currentTicketId', 'your-ticket-id')
```

### Интеграция с бэкендом

```javascript
import { getTicketStatus, getRoutesByType } from '@/api/ticketMonitoring'

const ticketStatus = await getTicketStatus('ticket-id')
const routes = await getRoutesByType(searchParams, 'optimal')
```

## Дизайн

Компонент мониторинга использует единый дизайн с главной страницей:

- **Шрифт**: Inter
- **Цветовая схема**: градиенты #667eea → #764ba2 → #f093fb
- **Тени**: мягкие тени для карточек
- **Анимации**: плавные переходы при наведении
- **Адаптивность**: responsive дизайн для всех устройств

## Компоненты интерфейса

### Шапка

- Кнопка "Назад" с навигацией
- Заголовок "Мониторинг билета"

### Информация о билете

- Маршрут отправления → назначения
- Статус билета с цветовой индикацией
- Дата, стоимость, время в пути

### Выбор типа маршрута

- Кнопки для выбора типа (оптимальный/дешевый/быстрый)
- Иконки и описания для каждого типа

### Детали маршрута

- Карточки сегментов с иконками транспорта
- Временные метки и точки маршрута
- Стоимость каждого сегмента

### Нижняя навигация

- Мониторинг (активная)
- Главная
- Билеты
- Профиль

## Обработка ошибок

- Состояние загрузки с спиннером
- Сообщения об ошибках с кнопкой повтора
- Graceful degradation при отсутствии данных

## Требования

- Node.js
- Vue.js 2.x
- Современный браузер с поддержкой ES6+

## Бэкенд интеграция

API base URL: `https://lena.linkpc.net/api/v1`

Поддерживаемые эндпоинты:

- `POST /routes/search` - поиск маршрутов
- `POST /tickets/status` - статус билета
- `POST /tickets/realtime` - обновления в реальном времени
- `POST /tickets/info` - информация о билете

## Развитие

Возможные улучшения:

- Push-уведомления об изменениях статуса
- Интерактивная карта маршрута
- История поездок
- Экспорт информации о билете
- Поддержка множественных пассажиров
